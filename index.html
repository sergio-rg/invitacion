<html>
<head>
  <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
  <script src="https://cdn.rawgit.com/jeromeetienne/ar.js/master/aframe/build/aframe-ar.min.js"></script>
</head>
<body style="margin: 0; overflow: hidden;">
  <a-scene embedded arjs vr-mode-ui="enabled: false">
    <!-- Cámara AR.js -->
    <a-marker preset="hiro" id="markerHiro">
      <!-- Video que se mostrará en AR -->
      <a-video id="arVideo" position="0 0.5 0" width="1" height="0.5" rotation="-90 0 0"></a-video>
    </a-marker>
    <a-entity camera></a-entity>
  </a-scene>

  <script>
    // Obtener el marcador y el video
    const marker = document.querySelector("#markerHiro");
    const videoEl = document.createElement('video');
    videoEl.src = "test.mp4";  // Añade tu video aquí
    videoEl.crossOrigin = "anonymous";  // Si el video está en un dominio diferente
    videoEl.loop = true;  // Mantener en loop
    videoEl.preload = "auto";  // Cargar el video automáticamente pero no reproducirlo
    videoEl.style.display = "none";  // No mostrar el video HTML directamente

    // Pausar el video al cargar la página
    window.addEventListener("load", () => {
      videoEl.pause();  // Asegurar que el video está pausado al inicio
    });

    // Esperar a que el video esté listo
    videoEl.addEventListener('loadeddata', () => {
      console.log('Video cargado');
      const aVideo = document.querySelector('#arVideo');
      aVideo.setAttribute('src', videoEl);  // Vincular el video al componente AR.js
    });

    // Escuchar cuando el marcador sea detectado
    marker.addEventListener("markerFound", () => {
      console.log("Marcador encontrado, reproduciendo video");
      videoEl.play();  // Reproducir el video cuando el marcador sea detectado
    });

    // Escuchar cuando el marcador sea perdido
    marker.addEventListener("markerLost", () => {
      console.log("Marcador perdido, pausando video");
      videoEl.pause();  // Pausar el video cuando el marcador no se vea
    });
  </script>
</body>
</html>
